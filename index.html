<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ã½ã‚ARãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background: #000;
            color: #fff;
            font-family: sans-serif;
        }
        .launch-btn {
            padding: 20px 40px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            background: linear-gradient(45deg, #FF512F, #DD2476);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            text-decoration: none;
        }
        p { margin-top: 20px; font-size: 14px; opacity: 0.8; }
    </style>
</head>
<body>

    <a id="ar-link" class="launch-btn">ğŸš€ ARã‚’èµ·å‹•ã™ã‚‹</a>
    
    <p id="status-msg">ãŠä½¿ã„ã®ç«¯æœ«ã‚’åˆ¤å®šä¸­...</p>

    <script>
        // è¨­å®šï¼šè‡ªåˆ†ã®GitHubã®URLã«æ›¸ãæ›ãˆã¦ãã ã•ã„
        const GLB_URL = "https://[ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å].github.io/[ãƒªãƒã‚¸ãƒˆãƒªå]/apollo.glb";
        const USDZ_URL = "https://[ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å].github.io/[ãƒªãƒã‚¸ãƒˆãƒªå]/apollo.usdz";
        const FALLBACK_URL = window.location.href; // å¤±æ•—æ™‚ã®æˆ»ã‚Šå…ˆ

        const btn = id('ar-link');
        const msg = id('status-msg');
        const ua = navigator.userAgent.toLowerCase();

        function id(name) { return document.getElementById(name); }

        // --- åˆ¤å®šã¨ãƒªãƒ³ã‚¯å…ˆã®åˆ‡ã‚Šæ›¿ãˆ ---

        if (/iphone|ipad|ipod/.test(ua)) {
            // iOSç”¨ï¼šç›´æ¥USDZãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‘¼ã³å‡ºã™ï¼ˆrel="ar" ãŒé‡è¦ï¼‰
            msg.innerText = "iPhone/iPad ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ";
            btn.href = USDZ_URL;
            btn.setAttribute("rel", "ar");
            
            // iOSã®å ´åˆã€imgã‚¿ã‚°ã‚’ä¸­ã«å«ã‚ã‚‹ã¨è‡ªå‹•èµ·å‹•ç‡ãŒä¸ŠãŒã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™
            const img = document.createElement('img');
            img.src = "apollo.glb"; // ãƒ€ãƒŸãƒ¼
            img.style.display = "none";
            btn.appendChild(img);

        } else if (/android/.test(ua)) {
            // Androidç”¨ï¼šGoogleã®Scene Viewerã‚’Intentã§å¼·åˆ¶å‘¼ã³å‡ºã—
            msg.innerText = "Android ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ";
            
            // ã“ã‚ŒãŒæœ€çŸ­ãƒ»æœ€å¼·ã®Androidç”¨ARèµ·å‹•URLã§ã™
            const sceneViewerUrl = `intent://arvr.google.com/scene-viewer/1.0?file=${GLB_URL}&mode=ar_only#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(FALLBACK_URL)};end;`;
            
            btn.href = sceneViewerUrl;

        } else {
            msg.innerText = "PCç­‰ã§ã¯ARã¯èµ·å‹•ã§ãã¾ã›ã‚“";
            btn.style.display = "none";
        }

        // è‡ªå‹•èµ·å‹•ã®è©¦è¡Œï¼ˆâ€»Xãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ã¯ã»ã¼ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ãŒã€ä¸€å¿œè¨˜è¿°ï¼‰
        window.onload = () => {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãªã—ã®èµ·å‹•ã¯OSãŒãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ãŸã‚ã€
            // å®Ÿéš›ã«ã¯ã€Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã•ã›ã‚‹ã€ã®ãŒæœ€ã‚‚ç¢ºå®Ÿã§ã™ã€‚
        };
    </script>
</body>
</html>
